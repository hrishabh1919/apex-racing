<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apex Racing - Mastering The Apex</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --racing-red: #ff0033;
      --dark-bg: #0a0a0a;
      --light-bg: #111;
      --text-light: #e0e0e0;
      --text-medium: #888;
    }

    /* Reset & Base */
    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background-color: var(--dark-bg);
      /* MODIFICATION: Added subtle background texture */
      background-image: url('https://www.transparenttextures.com/patterns/subtle-carbon.png');
      color: var(--text-light);
      overflow-x: hidden;
    }

    /* Custom Cursor */
    .cursor {
        position: fixed;
        width: 20px;
        height: 20px;
        border: 2px solid var(--text-light);
        border-radius: 50%;
        left: 0;
        top: 0;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 1000;
        transition: width 0.3s, height 0.3s, background-color 0.3s, border-color 0.3s;
    }
    .cursor.hover {
        width: 50px;
        height: 50px;
        background-color: rgba(255, 0, 51, 0.3);
        border-color: var(--racing-red);
    }

    /* Header */
    .main-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      padding: 20px 5%;
      box-sizing: border-box;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 10;
      background: rgba(10, 10, 10, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transform: translateY(-100%);
      animation: slideDown 1s ease-out 3.5s forwards;
    }
    @keyframes slideDown {
        to { transform: translateY(0); }
    }
    .header-logo {
        font-family: 'Orbitron', sans-serif;
        font-size: 1.5rem;
        text-transform: uppercase;
        color: var(--text-light);
        text-decoration: none;
    }
    .main-header nav a {
      color: var(--text-light);
      text-decoration: none;
      margin-left: 40px;
      font-weight: 400;
      transition: color 0.3s ease, text-shadow 0.3s ease;
    }
    .main-header nav a:hover,
    .main-header nav a.active { /* Active state styling */
      color: var(--racing-red);
      text-shadow: 0 0 7px var(--racing-red);
    }
    
    /* --- MODIFICATION: Splash Screen --- */
    .splash-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: var(--dark-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
      transition: opacity 1s ease-out, visibility 1s ease-out;
    }
    .splash-screen.hidden { 
      opacity: 0; 
      visibility: hidden;
      pointer-events: none; 
    }
    .splash-logo-container {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .splash-logo-container img {
        max-width: 300px;
        /* Applying the new breathe animation */
        animation: breathe 1.5s ease-in-out 2;
    }

    /* --- NEW: Breathe Animation --- */
    @keyframes breathe {
        0% {
            transform: scale(0.95);
            opacity: 0.7;
        }
        50% {
            transform: scale(1.05);
            opacity: 1;
        }
        100% {
            transform: scale(0.95);
            opacity: 0.7;
        }
    }

    /* Main Container */
    .container {
        width: 100%;
        overflow: hidden;
    }

    /* Hero Section */
    .hero-section {
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 0 5%;
        background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
    }
    .hero-title {
        font-family: 'Orbitron', sans-serif;
        font-size: clamp(2.5rem, 10vw, 8rem);
        text-transform: uppercase;
        line-height: 1.1;
        margin: 0;
        color: #fff;
        text-shadow: 0 0 14px rgba(255, 0, 51, 0.5);
    }
    .hero-tagline {
        font-size: clamp(1rem, 2vw, 1.5rem);
        color: var(--text-medium);
        margin-top: 20px;
        letter-spacing: 3px;
    }

    /* Horizontal Scroll Section */
    .horizontal-scroll-container {
        position: relative;
        height: 100vh;
    }
    .horizontal-scroll-wrapper {
        position: sticky;
        top: 0;
        height: 100vh;
        width: 100vw;
        overflow: hidden;
    }
    .horizontal-content {
        display: flex;
        height: 100%;
        width: 300vw; /* 100vw per section */
        will-change: transform;
    }
    .content-panel {
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0 10%;
        box-sizing: border-box;
    }
    .panel-content {
        max-width: 900px;
    }
    .panel-number {
        font-family: 'Orbitron', sans-serif;
        font-size: 2rem;
        color: var(--racing-red);
        margin-bottom: 20px;
    }
    .panel-title {
        font-family: 'Orbitron', sans-serif;
        font-size: clamp(2rem, 5vw, 4rem);
        text-transform: uppercase;
        margin: 0 0 30px 0;
    }
    .panel-text {
        font-size: 1.1rem;
        line-height: 1.8;
        color: var(--text-medium);
    }
    .panel-text b {
        color: var(--text-light);
        font-weight: 400;
    }

    /* Footer/End Section */
    .end-section {
        height: 50vh;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-family: 'Orbitron', sans-serif;
        font-size: 3rem;
        text-transform: uppercase;
        color: var(--text-medium);
    }

    /* Scroll to Top Button */
    .scroll-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        background-color: var(--racing-red);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 5;
        opacity: 0;
        transform: translateY(20px);
        pointer-events: none;
        transition: opacity 0.4s ease, transform 0.4s ease;
        border: 2px solid var(--racing-red);
    }
    .scroll-to-top.visible {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }
    .scroll-to-top:hover {
        background-color: transparent;
    }
    .scroll-to-top svg {
        width: 24px;
        height: 24px;
        stroke: #fff;
        transition: transform 0.3s ease;
    }
    .scroll-to-top:hover svg {
        transform: translateY(-3px);
    }

  </style>
</head>
<body>

  <div class="cursor"></div>

  <header class="main-header">
    <a href="#" class="header-logo">Apex Racing</a>
    <nav>
      <a href="#stem-racing" class="nav-link">STEM Racing</a>
      <a href="#about-us" class="nav-link">About Us</a>
      <a href="#apex-green" class="nav-link">Apex Green</a>
    </nav>
  </header>

  <!-- --- MODIFICATION: Splash Screen HTML --- -->
  <div class="splash-screen">
    <div class="splash-logo-container">
        <img src="images/logo.png" alt="Apex Racing Logo">
    </div>
  </div>

  <div class="container">
    <section class="hero-section" id="home">
        <h1 class="hero-title">Apex Racing</h1>
        <p class="hero-tagline">Mastering The Apex, Owning The Finish</p>
    </section>

    <div class="horizontal-scroll-container">
        <div class="horizontal-scroll-wrapper">
            <div class="horizontal-content">
                <section class="content-panel" id="stem-racing">
                    <div class="panel-content">
                        <div class="panel-number">01</div>
                        <h2 class="panel-title">Stem Racing</h2>
                        <p class="panel-text">STEM racing is where innovation meets speed. It’s more than just building miniature race cars—it’s about pushing the limits of Science, Technology, Engineering, and Mathematics to solve real-world challenges. Through competitions like Stem Racing, we transform ideas into high-performance machines, mastering everything from aerodynamics to branding.</p>
                    </div>
                </section>
                <section class="content-panel" id="about-us">
                    <div class="panel-content">
                        <div class="panel-number">02</div>
                        <h2 class="panel-title">About Us</h2>
                        <p class="panel-text">At Apex Racing, we blend passion, innovation, and precision to create high-performance miniature race cars. Guided by our motto “Mastering the Apex, Owning the Finish,” we turn ideas into engineering reality—combining aerodynamics, design, and teamwork to compete at the highest level and represent India on the world stage.</p>
                    </div>
                </section>
                <section class="content-panel" id="apex-green">
                    <div class="panel-content">
                        <div class="panel-number">03</div>
                        <h2 class="panel-title">Apex Green</h2>
                        <p class="panel-text"><b>“Creating a Sustainable Future: Planting Trees for Today and Tomorrow”</b><br>Apex Green is our long-term sustainability initiative, dedicated to taking our impact beyond the racetrack. From tree plantation drives to eco-education workshops, we work to inspire environmental responsibility in our community.</p>
                    </div>
                </section>
            </div>
        </div>
    </div>
    
    <section class="end-section">
        The Finish Line
    </section>
  </div>

  <a class="scroll-to-top">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
  </a>

  <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>

  <script>
    // --- Splash Screen ---
    const splashScreen = document.querySelector('.splash-screen');
    // The timeout matches the 3s total duration of the new animation (1.5s * 2 iterations)
    setTimeout(() => {
      splashScreen.classList.add('hidden');
    }, 3000);

    // --- Lenis Smooth Scroll ---
    const lenis = new Lenis();
    function raf(time) {
      lenis.raf(time);
      requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);

    // --- GSAP Horizontal Scroll ---
    gsap.registerPlugin(ScrollTrigger);
    const horizontalContent = document.querySelector('.horizontal-content');

    const horizontalTween = gsap.to(horizontalContent, {
        x: () => - (horizontalContent.scrollWidth - document.documentElement.clientWidth) + "px",
        ease: "none",
        scrollTrigger: {
            trigger: ".horizontal-scroll-container",
            start: "top top",
            end: () => "+=" + (horizontalContent.scrollWidth - document.documentElement.clientWidth),
            pin: true,
            scrub: 1,
            invalidateOnRefresh: true,
        }
    });

    // --- Custom Cursor ---
    const cursor = document.querySelector('.cursor');
    const interactiveElements = document.querySelectorAll('a');

    window.addEventListener('mousemove', e => {
        gsap.to(cursor, {
            duration: 0.3,
            x: e.clientX,
            y: e.clientY,
            ease: 'power3.out'
        });
    });

    interactiveElements.forEach(el => {
        el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
        el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
    });

    // --- Navigation Links ---
    document.querySelectorAll('.nav-link').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if(targetElement) {
                lenis.scrollTo(targetElement, {
                    offset: -window.innerHeight / 2
                });
            }
        });
    });
    
    // --- Active Nav Link on Scroll ---
    const navLinks = gsap.utils.toArray('.nav-link');
    const sections = gsap.utils.toArray('.content-panel');

    sections.forEach(section => {
        ScrollTrigger.create({
            trigger: section,
            start: "left center",
            end: "right center",
            horizontal: true,
            containerAnimation: horizontalTween,
            onToggle: self => self.isActive && setActive(section)
        });
    });

    function setActive(activeSection) {
        navLinks.forEach(link => {
            if (link.hash === `#${activeSection.id}`) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
    }


    // --- Scroll to Top Logic ---
    const scrollToTopBtn = document.querySelector('.scroll-to-top');
    const logoLink = document.querySelector('.header-logo');

    window.addEventListener('scroll', () => {
        if (window.scrollY > window.innerHeight) {
            scrollToTopBtn.classList.add('visible');
        } else {
            scrollToTopBtn.classList.remove('visible');
        }
    });

    const scrollToTop = () => {
        lenis.scrollTo(0, { duration: 2 });
    };

    scrollToTopBtn.addEventListener('click', scrollToTop);
    logoLink.addEventListener('click', (e) => {
        e.preventDefault();
        scrollToTop();
    });

  </script>
</body>
</html>
